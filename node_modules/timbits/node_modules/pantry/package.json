{
  "name": "pantry",
  "description": "A JSON/XML resource caching library based on Request",
  "version": "0.5.3",
  "homepage": "https://github.com/Postmedia/pantry",
  "author": {
    "name": "Edward de Groot",
    "email": "edegroot@postmedia.com",
    "url": "http://mred9.com"
  },
  "contributors": [
    {
      "name": "Keith Benedict",
      "email": "kbenedict@postmedia.com"
    }
  ],
  "dependencies": {
    "request": "~2.11",
    "xml2js": "~0.2.0",
    "winston": "~0.7.2",
    "soap": "~0.2.7"
  },
  "devDependencies": {
    "mocha": "~1.12",
    "should": "~1.2",
    "memcached": "~0.2.3",
    "redis": "~0.8.4"
  },
  "bugs": {
    "url": "https://github.com/Postmedia/pantry/issues"
  },
  "licenses": [
    {
      "type": "MIT",
      "url": "https://github.com/Postmedia/pantry/blob/master/LICENSE"
    }
  ],
  "keywords": [
    "request",
    "cache",
    "json",
    "xml",
    "redis",
    "memcached",
    "soap"
  ],
  "repository": {
    "type": "git",
    "url": "git://github.com/postmedia/pantry"
  },
  "main": "./lib/pantry",
  "scripts": {
    "test": "mocha"
  },
  "engines": {
    "node": "0.8.x"
  },
  "readme": "# Pantry\nA JSON/XML resource caching library based on Request\n\n## Introduction\n\nPantry is an HTTP client cache used to minimize requests for external JSON and XML feeds.  The Pantry will cache resources to minimize round trips, utilizing the local cache when available and refresh the cache (asynchronously) as needed.\n\nAs with any of our projects, constructive criticism is encouraged.\n\n## Installing\n\nJust grab [node.js](http://nodejs.org/#download) and [npm](http://github.com/isaacs/npm) and you're set:\n\n\tnpm install pantry\n\t\nPantry uses the amazing [Request](https://github.com/mikeal/request) library for all HTTP requests and [xml2js](https://github.com/Leonidas-from-XIV/node-xml2js) to parse xml resources.\n\n## Using\n\nWork in progress.  See the examples for the time being.\n\nTo utilize the pantry, simply require it, optionally override some default values, and then request your resource(s) via the fetch method\n\n\tvar pantry = require('pantry');\n\tpantry.configure({ shelfLife: 5 });\n\t\n\tpantry.fetch({ uri: 'http://search.twitter.com/search.json?q=winning'}, function (error, item) {\n\t\tconsole.log(item.results[0].text);\n\t});\n\nAt this item, the following configuration options can be specified:\n\n* shelfLife - number of seconds before a resource reaches it's best-before-date\n* maxLife - number of seconds before a resource spoils\n* caseSensitive - URI should be considered case sensitive when inferring cache key\n* verbosity - possible values are 'silly', 'debug, 'verbose', info', 'warn' and 'error'  (default is 'error' for production systems)\n* parser - possible values are 'json' and 'xml'  (default is undefined, in which auto-detection by content-type header is used)\n* ignoreCacheControl - do not utilize the cache-control header to override the cache configuration if present (default if false)\n* xmlOptions - options passed into the [xml2js](https://github.com/Leonidas-from-XIV/node-xml2js) parser (default is  {explicitRoot: false})\n\nWhen you request a resource from the pantry, a couple interesting things happen.  If the item is available in the pantry, and hasn't 'spoiled', it will be returned immediately via the callback.  If it has expired (it's beyond its best before date) but hasn't spoiled, it will still be returned and then refreshed in the background.\n\n> Ode to my immigrant mother:  The best before date is treated as a recommendation.  If it hasn't visibly spoiled it's probably still good to use, so use it until we have a chance to go shopping.  Especially if it's salad dressing, that stuff never goes bad as long as it's in the fridge.\n\nIf the resource isn't available in the pantry, or the item has spoiled, then the item will be retrieved immediately and won't be passed on to the callback method until we have the resource on hand.\n\nPantry will also ensure that we don't fetch the same resource multiple times in parallel.  If a resource is already being requested, additional requests for that same resource will hook into the same completion event for the original request.\n\n## Storage\n\nThe latest version of Pantry ( >= 0.3 ) supports the ability to plug the caching storage engine of your choice.  By default, pantry will utilize the MemoryStorage plugin, which will (of all things) cache items locally in memory.  \n\nTo specify an alternate storage engine, or to provide custom configuration for the default memory storage, simply assign the new storage engine to pantry via the .storage property.\n\n### MemoryStorage\n\nThe constructor for MemoryStorage takes two parameters:\n\n* config - hash of configuration properties (see below)\n* verbosity - controls the level of logging (default is 'info')\n\nThe following configuration properties are allowed for MemoryStorage\n\n* capacity - the maximum number of items to keep in the pantry (default is 1000)\n* ideal - when cleaning up, the ideal number of items to keep in the pantry (default is 90% of capacity)\n\n\nExample:\n\n\tvar pantry = require('pantry');\n\t\t, MemoryStorage = require('pantry/lib/pantry-memory');\n\n\tpantry.storage = new MemoryStorage({\n\t  capacity: 18,\n\t  ideal: 12\n\t}, 'debug');\n\nNote that the ideal must be set to a value which is between 10% and 90% of capacity.  Every time an item is added to pantry, we ensure we haven't reached capacity.  If we have, then we first start with throwing out any spoiled items.  After that, if we are still above capacity we will get rid of the expired items, and if we're really desperate we will need to throw out some good items just to make room.\n\n### RedisStorage\n\nA simply plugin for Redis is included with Pantry.  Note that since use of Redis is optional, the required client (redis) is not included in the package dependencies.  You must include it in your own application's dependencies and/or manually install it via npm install redis\n\nThe constructor for RedisStorage takes four parameters:\n\n* port - the redis server port (default is 6379)\n* host - the redis server host name (default is 'localhost')\n* options - hash of configuration properties (see below)\n* verbosity - controls the level of logging (default is 'info')\n\nThe following configuration properties are allowed for RedisStorage\n\n* auth - the password / authentication key for the redis server (default is null)\n\nExample:\n\n\tvar pantry = require('pantry')\n\t\t, RedisStorage = require('pantry/lib/pantry-redis');\n\n\tpantry.storage = new RedisStorage(6379, 'localhost', null, 'debug');\n\n### MemcachedStorage\n\nA simply plugin for Memcached is also included with Pantry.  Note that since use of Memcached is optional, the required client (memcached) is not included in the package dependencies.  You must include it in your own application's dependencies and/or manually install it via npm install memcached\n\nThe constructor for MemcachedStorage takes three parameters:\n\n* servers - a string or array of strings identifying the Memcached server(s) to use\n* options - hash of memcached configuration properties (see [here](https://github.com/3rd-Eden/node-memcached#readme) for more details)\n* verbosity - controls the level of logging (default is 'info')\n\nExample:\n\n\tvar pantry = require('../src/pantry')\n\t\t, MemcachedStorage = require('../src/pantry-memcached');\n\n\tpantry.storage = new MemcachedStorage('localhost:11211', {}, 'debug');\n\t\n\n## SOAP Support\n\nAs of v0.5.1, Pantry contains experimental support for SOAP requests.  To make SOAP requests, you must first configure Pantry by pointing it to the correct WSDL using the initSoap(name, url, callback) method like this:\n\n\tpantry.initSoap('calculator', 'http://some.domain/service/wsdl', function(error, client) {\n\t\t//  configuration completed. you can further configure the client (e.g. authentication) if needed\n\t});\n\t\nThe name parameter can be any made up but valid host name.  This allows you to configure and identify multiple SOAP services.  SOAP requests are handled by the [soap](https://github.com/milewise/node-soap) package as opposed to Request.\n\nIf you attempt to configure a service under an already existing name, it will be ignored.  The error and client parameters in this situation will both be undefined.\n\nOnce configured, you can use our custom 'soap' protocol and the host name you defined during configuration to make your SOAP requests like this:\n\n\tvar src = {\n\t\turi: 'soap://calculator/add?x=2&y=3,\n\t\tmaxLife: 60\n\t}\n\t\nThe code above tells pantry you want to make a request to the SOAP service named 'calculator' (by you via initSoap) and call the add method, passing it parameters x and y.\n\nPutting it all together, you can execute a SOAP request using the following pattern (plus additional error handling of course).\n\n\tpantry.initSoap('calculator', 'http://some.domain/service/wsdl', function(error, client) {\n\t\tif (client) {\n\t\t\t// additional one-time client configuration goes here\n\t\t}\n\t\t\n\t\tpantry.fetch('soap://calculator/add?x=2&y=3', function(error, item) {\n\t\t\t// handle the data here\n\t\t});\n\t});\n\t\nAs of v0.5.2, Pantry also supports complex data types in soap requests.  They can be passed in via the 'args' property like the following:\n\n\tvar src = {\n\t\turi: 'soap://calculator/add',\n\t\tkey: 'calculator/add/2/3'\n\t\tmaxLife: 60,\n\t\targs: {\n\t\t\tx: 2,\n\t\t\ty: 3,\n\t\t\t'namespace:name': 'some value',\n\t\t\tmyobject: {\n\t\t\t\tfirst: 'billy',\n\t\t\t\tlast: 'bob'\n\t\t\t}\n\t\t}\n\t};\n\t\nWhen passing in values via arg, please ensure you specify your own unique cache key like in the example above!  In a future release we'll likely make it a requirement for SOAP and POST requests.\n\t\n## Upgrading\n\nAs of v0.4.x, we now use v0.2.x of the xml2js library.  This has significantly changed the default parsing options.  You can easily revert to the xml2js v0.1 parsing options as described [here](https://github.com/Leonidas-from-XIV/node-xml2js)\n\n## Roadmap\n\n* Better handling of not-GET requests\n* Ability to execute array of requests in parallel\n* Support for cookies (including cache key)\n\n## Created and managed by\n\n* Edward de Groot\n* Keith Benedict\n",
  "readmeFilename": "README.md",
  "_id": "pantry@0.5.3",
  "_from": "pantry@~0.5.0"
}
